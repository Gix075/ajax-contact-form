/*! 
 * ************************************************************************* 
 *  AjaxContactForm | Simple ajax contact form 
 *  Version 1.7.2 - Date: 18/02/2017 
 *  HomePage: https://github.com/Gix075/ajax-contact-form 
 * ************************************************************************* 
*/ 
function reCaptchaValidator(a){var b={publicKey:null,theme:"light",debug:!1,phpValidator:"ajax-contact-form/php/ajaxContactForm_recaptcha.php",callbacks:{success:null,error:null}},c=this;this.params=$.extend(!0,b,a),this.getCaptcha=function(a){grecaptcha.render(a,{sitekey:c.params.publicKey,theme:c.params.theme})},this.validateCaptcha=function(a){var b={response:$("#"+a).find(".g-recaptcha-response").val()};console.log("value: "+b.response),""!=b.response?$.ajax({url:c.params.phpValidator,type:"POST",data:b,dataType:"json",success:function(a){a.success===!0?(c.params.debug===!0&&console.log("reCaptchaValidator: Validation Success!"),c.params.callbacks.success()):(c.params.debug===!0&&console.log("reCaptchaValidator: Validation Fail!"),c.params.callbacks.error())},error:function(){c.params.debug===!0&&console.log("reCaptchaValidator: AjaxError!"),c.params.callbacks.error()}}):(c.params.debug===!0&&console.log("reCaptchaValidator: No reCaptcha Data!"),c.params.callbacks.error())}}function formValidator(a){var b="",c="";this.opts=a,this.formValidation=!0,this.validInput=!1,this.validTextarea=!1,this.validPassword=!1,this.validEmail=!1,this.validSelect=!1,this.validRadio=!1,this.validCheckbox=!1,this.validPhone=!1,b=this.opts,c=this,this.validate=function(a,d,e){$(d).on("click",function(d){d.preventDefault();var f=$("form"+a),g=f.find("input.validate").not('input[type="radio"]').not('input[type="checkbox"]'),h=f.find('input[type="password"].validate.pswd-confirm'),i=f.find('input[type="tel"].validate'),j=f.find("textarea.validate"),k=f.find("select.validate"),l=f.find('input[type="email"].validate'),m=f.find(".radio-group.validate"),n=f.find(".checkbox-group.validate"),o=0;$(g).each(function(){""==$(this).val()?(b.showErrors===!0&&c.showError(this,"input","empty"),o+=1):b.showErrors===!0&&c.hideError(this,"input")}),c.validInput=!(o>0),o=0,$(i).each(function(){var a=$(this).val();if(""!=a){var d=/^\d+$/;d.test(a)===!1?(b.showErrors===!0&&c.showError(this,"input","wrong"),o+=1):b.showErrors===!0&&c.hideError(this,"input")}}),c.validPhone=!(o>0),o=0,$(j).each(function(){""==$(this).val()?(b.showErrors===!0&&c.showError(this,"textarea","empty"),o+=1):b.showErrors===!0&&c.hideError(this,"textarea")}),c.validTextarea=!(o>0),o=0,$(k).each(function(){$("option:selected",this).not(".not-option").length?b.showErrors===!0&&c.hideError(this,"select"):(b.showErrors===!0&&c.showError(this,"select","empty"),o+=1)}),c.validSelect=!(o>0),o=0,$(l).not(".email-confirm").each(function(){if(""!=$(this).val()&&b.mailformat===!0){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.test($(this).val())===!1?(b.showErrors===!0&&c.showError(this,"email","wrong"),o+=1):b.showErrors===!0&&c.hideError(this,"email")}if(""!=$(this).val()&&b.mailconfirm===!0&&0==o){console.log($(this).attr("id"));var d=$('.email-confirm[data-confirm="#'+$(this).attr("id")+'"]');$(this).val()!=$(d).val()?(b.showErrors===!0&&c.showError(d,"email","wrong"),o+=1):b.showErrors===!0&&c.hideError(d,"email")}}),c.validEmail=!(o>0),o=0,b.passwordconfirm===!0&&$(h).each(function(){if(""!=$(this).val()){var a=$(this).data("confirm");$(this).val()!=$(a).val()?(b.showErrors===!0&&c.showError(this,"password","wrong"),o+=1):b.showErrors===!0&&c.hideError(this,"password")}}),c.validPassword=!(o>0),o=0,$(m).each(function(){var a=!1;$(this).find('input[type="radio"]').each(function(){$(this).is(":checked")&&(a=!0)}),a===!1?(b.showErrors===!0&&c.showError(this,"radio","empty"),o+=1):b.showErrors===!0&&c.hideError(this,"radio")}),c.validRadio=!(o>0),o=0,$(n).each(function(){var a=!1;$(this).find('input[type="checkbox"]').each(function(){$(this).is(":checked")&&(a=!0)}),a===!1?(b.showErrors===!0&&c.showError(this,"checkbox","empty"),o+=1):b.showErrors===!0&&c.hideError(this,"checkbox")}),c.validCheckbox=!(o>0),o=0,c.validInput===!0&&c.validPassword===!0&&c.validPhone===!0&&c.validTextarea===!0&&c.validEmail===!0&&c.validSelect===!0&&c.validRadio===!0&&c.validCheckbox===!0?e.success():e.fail()})},this.showError=function(a,c,d){if("radio"==c||"checkbox"==c)b.bootstrap===!0?$(a).closest("."+c+"-group").addClass("has-error"):$(a).addClass("error"),$(a).closest("."+c+"-group").find(".form-input-error-msg").addClass("show-error");else switch(b.bootstrap===!0?$(a).closest(".form-group").addClass("has-error"):$(a).addClass("error"),$(a).prev(".form-input-error-msg").addClass("show-error"),d){case"empty":$(a).prev(".form-input-error-msg").find(".error-wrong").removeClass("show-error"),$(a).prev(".form-input-error-msg").find(".error-empty").addClass("show-error");break;case"wrong":$(a).prev(".form-input-error-msg").find(".error-empty").removeClass("show-error"),$(a).prev(".form-input-error-msg").find(".error-wrong").addClass("show-error")}},this.hideError=function(a,c){"radio"==c||"checkbox"==c?(b.bootstrap===!0?$(a).closest("."+c+"-group").removeClass("has-error"):$(a).removeClass("error"),$(a).closest("."+c+"-group").find(".form-input-error-msg").removeClass("show-error")):(b.bootstrap===!0?$(a).closest(".form-group").removeClass("has-error"):$(a).removeClass("error"),$(a).prev(".form-input-error-msg").removeClass("show-error"),$(a).prev(".form-input-error-msg").find(".error-empty,.error-wrong").removeClass("show-error"))},this.clearError=function(a){$(a).find("*").removeClass("error"),$(a).find("*").removeClass("has-error"),$(a).find("*").removeClass("show-error")}}function ajaxContactForm(a){var b={form:"#ajaxContactForm",formBtn:"#ajaxContactFormBtn",ws:"ajax-contact-form/php/ajaxContactForm.php",showMsg:!0,recaptcha:{pubKey:"",element:"ajaxContactForm_recaptcha",theme:"light",ws:"ajax-contact-form/php/ajaxContactForm_recaptcha.php"},attachments:{allowed:!0,ws:"ajax-contact-form/php/attachments/ajaxContactForm_attachments.php",acceptFileTypes:/(\.|\/)(gif|jpe?g|png|pdf|zip)$/i,maxFileSize:20971520,maxTotalSize:20971520,maxFiles:10,cleanAfterMinutes:15},messages:{attachments:{clean:"TIMEOUT - Your file was removed, please upload it again!",fileRemoved:"File removed!",errors:{uploadFailed:"Upload failed!",maxNumberOfFiles:"Sorry, maximum number of files exceeded",maxFileSize:"Sorry, file too large!",maxTotalSize:"Sorry the attachment size amount exceeds the maximum quota!",timeout:"TIMEOUT - Your file was removed, please upload it again!",fileType:"File type not allowed!"}}},debug:!0},c=this;this.settings=$.extend(!0,b,a);var d={publicKey:this.settings.recaptcha.pubKey,theme:this.settings.recaptcha.theme,debug:!0,phpValidator:this.settings.recaptcha.ws,callbacks:{success:function(){$("#"+c.settings.recaptcha.element).prev(".form-input-error-msg").hide(),c.sendMessage()},error:function(){$("#"+c.settings.recaptcha.element).prev(".form-input-error-msg").show()}}};this.recaptcha=new reCaptchaValidator(d),this.init=function(){if(this.recaptcha.getCaptcha(this.settings.recaptcha.element),this.validateContactForm(),this.settings.attachments.allowed===!0){var a="acf_attachmentTotalSize_"+this.settings.form.replace("#",""),b="acf_attachmentMaxNumber_"+this.settings.form.replace("#","");sessionStorage[a]=0,sessionStorage[b]=0,this.uploadFile(this.settings.attachments.cleanAfterMinutes)}},this.validateContactForm=function(){var a={bootstrap:!0,mailconfirm:!0,mailformat:!0,showErrors:!0};new formValidator(a).validate(this.settings.form,this.settings.formBtn,{success:function(){console.log("%c AjaxContactForm: validation success! ","background:#333;color:#fff;"),$(c.settings.form).find(".acf_messagebox").height($(c.settings.form).height()),c.spinnerPlay(),c.recaptcha.validateCaptcha(c.settings.recaptcha.element)},fail:function(){console.log("%c AjaxContactForm: validation fail! ","background:#333;color:red;")}})},this.sendMessage=function(){var a=$(this.settings.form).serialize(),b=this;$.ajax({url:this.settings.ws,type:"POST",data:a,dataType:"json",success:function(a){if(b.spinnerStop(),b.settings.showMsg===!0){switch($(b.settings.form).find(".acf_messagebox").show(),a.result){case"success":$(b.settings.form).find(".acf_messagebox > .msg-error").hide(),$(b.settings.form).find(".acf_messagebox > .msg-success").show();break;case"fail":$(b.settings.form).find(".acf_messagebox > .msg-error > .msg-error-info").text(a.msg),$(b.settings.form).find(".acf_messagebox > .msg-success").hide(),$(b.settings.form).find(".acf_messagebox > .msg-error").show(),console.log("%c AjaxContactForm: MAIL_ERROR ","background:red;color:#fff;")}$(".acf_close-msg").on("click",function(a){a.preventDefault(),$(this).closest(".acf_messagebox").hide()})}},error:function(){console.log("%c AjaxContactForm: AJAX_ERROR ","background:red;color:#fff;"),b.spinnerStop(),$(b.settings.form).find(".acf_messagebox").show(),$(b.settings.form).find(".acf_messagebox > .msg-success").hide(),$(b.settings.form).find(".acf_messagebox > .msg-error").show(),$(".acf_close-msg").on("click",function(a){a.preventDefault(),$(this).closest(".acf_messagebox").hide()})}})},this.uploadFile=function(a){this.settings.attachments.maxFileNumber,this.settings.attachments.maxFileSize,this.settings.attachments.maxTotalSize;$(c.settings.form).find(".acf_attachments-dragarea span").on("click",function(){$(this).closest(".acf_attachments-dragarea").find('input[name="files[]"]').click()});var b="";$(c.settings.form).fileupload({url:c.settings.attachments.ws,dataType:"json",maxFileSize:c.settings.attachments.maxFileSize,acceptFileTypes:c.settings.attachments.acceptFileTypes,dropZone:$(c.settings.form).find(".acf_attachments-dragarea"),messages:{maxNumberOfFiles:c.settings.messages.attachments.errors.maxNumberOfFiles,acceptFileTypes:c.settings.messages.attachments.errors.fileType,maxFileSize:c.settings.messages.attachments.errors.maxFileSize,minFileSize:"File is too small"},done:function(d,e){c.settings.debug===!0&&console.log("ATTACHMENTS --> UPLOAD DONE"),$.each(e.result.files,function(d,e){b='<li>\n   <div class="acf_attachments-filename" data-fileurl="'+e.url+'" data-filename="'+e.name+'" data-filesize="'+e.size+'">\n       <span class="filename">'+e.name+'</span>\n       <span class="fileremove" data-filename="'+e.name+'" data-remove="'+e.deleteUrl+'"><span class="glyphicon glyphicon-remove"></span></span>\n   </div></li>\n',$(c.settings.form).find(".acf_attachments-error-msg").closest("li").remove(),$(c.settings.form).find(".acf_attachments-list").append(b),$(c.settings.form).find(".acf_attachments-progress").hide(),a>0&&c.uploadCleaner(e.name,e.url,e.size,a),c.uploadDeleteFile(e.name),c.uploadUpdateFileVal("add",e.name),c.uploadControlsWidget("add",e.size)})},progressall:function(a,b){$(c.settings.form).find(".acf_attachments-progress").show();var d=parseInt(b.loaded/b.total*100,10);$(c.settings.form).find(".acf_attachments-progbar").css("width",d+"%")},processfail:function(a,d){c.settings.debug===!0&&console.log("ATTACHMENTS --> UPLOAD PROCESS FAIL"),b='<li><span class="acf_attachments-error-msg acf_attachments-processfail-msg">'+d.files[d.index].error+"</span></li>",$(c.settings.form).find(".acf_attachments-error-msg").closest("li").remove(),$(c.settings.form).find(".acf_attachments-list").append(b)},fail:function(a,b){console.log("FAIL: "+b)}})},this.uploadDeleteFile=function(a){$(c.settings.form).find('.fileremove[data-filename="'+a+'"]').on("click",function(b){b.preventDefault();var d=$(this).closest("li"),e=($(this).closest(".acf_attachments-filename").data("fileurl"),$(this).closest(".acf_attachments-filename").data("filesize"));$.ajax({url:$(this).data("remove"),type:"DELETE",success:function(b,f){c.settings.debug===!0&&console.log("ATTACHMENTS --> FILE DELETED!"),"success"===f&&(c.uploadUpdateFileVal("remove",a),c.uploadControlsWidget("remove",e),$(d).find(".acf_attachments-filename").html(c.settings.messages.attachments.fileRemoved),setTimeout(function(){$(d).remove()},1e3))},error:function(){c.settings.debug===!0&&console.log("ATTACHMENTS --> DELETE ERROR: AjaxError!")}})})},this.uploadCleaner=function(a,b,d,e){$.ajax({url:"ajax-contact-form/php/attachments/ajaxContactForm_cleaner.php?file="+a+"&minutes="+e,dataType:"json",success:function(b){b.success===!0&&(c.settings.debug===!0&&console.log("ATTACHMENTS --> CLEANER: "+b.success+" - "+b.file+" "+b.msg),$(c.settings.form).find('.acf_attachments-filename[data-filename="'+b.file+'"]').html('<span class="acf_attachments-error-msg acf_attachments-filetimeout">'+c.settings.messages.attachments.errors.timeout+"</span>"),c.uploadUpdateFileVal("remove",a),c.uploadControlsWidget("remove",d))},error:function(){c.settings.debug===!0&&console.log("ATTACHMENTS --> CLEANER ERROR: AjaxError!")}})},this.uploadUpdateFileVal=function(a,b){var d=$(c.settings.form).find('input[name="acf_attachments"]').val();switch(a){case"add":d=d.split(","),d.push(b);var e=d.toString();e=","===e.charAt(0)?e.slice(1):e,$(c.settings.form).find('input[name="acf_attachments"]').val(e);break;case"remove":d=d.split(",");var f=d.indexOf(b);f>=0&&d.splice(f,1);var e=d.toString();e=","===e.charAt(0)?e.slice(1):e,$(c.settings.form).find('input[name="acf_attachments"]').val(e)}},this.uploadTotalSizeControl=function(a,b){var c="acf_attachmentTotalSize_"+this.settings.form.replace("#",""),d=""!==sessionStorage[c]&&void 0!==sessionStorage[c]?Number(sessionStorage[c]):0;switch(b=Number(b),a){case"add":d+=b,sessionStorage[c]=d;break;case"remove":d-=b,sessionStorage[c]=d}var e={overlimit:!(this.settings.attachments.maxTotalSize>d),limit:this.settings.attachments.maxTotalSize,amount:d};return e},this.uploadMaxNumberControl=function(a){var b="acf_attachmentMaxNumber_"+this.settings.form.replace("#",""),c=""!==sessionStorage[b]&&void 0!==sessionStorage[b]?Number(sessionStorage[b]):0;switch(a){case"add":c+=1;break;case"remove":c-=1}sessionStorage[b]=c;var d={overlimit:!(this.settings.attachments.maxFiles>c),limit:this.settings.attachments.maxFiles,amount:c};return d},this.uploadControlsWidget=function(a,b){var d,e,f,g;c.settings.attachments.maxTotalSize>0&&(d=c.uploadTotalSizeControl(a,b)),c.settings.attachments.maxFiles>0&&(f=c.uploadMaxNumberControl(a),c.settings.debug===!0&&console.log("ATTACHMENTS MAX NUMBER --> Overlimit: "+f.overlimit),f.overlimit===!0?c.uploadBlockForm():c.uploadUnBlockForm()),$(c.settings.form).find(".acf_attachments-sizecontrol").length&&(c.settings.attachments.maxTotalSize>0&&(e='<div class="acf_attachments-sizecontrol-display">\n   <span class="display_current-amount">'+Math.round(d.amount/1024/1024*100)/100+'</span>\n   <span class="display_total-limit">'+d.limit/1024/1024+"MB</span>\n</div>"),c.settings.attachments.maxFiles>0&&(g='<div class="acf_attachments-sizecontrol-display">\n   <span class="display_current-amount">'+f.amount+'</span>\n   <span class="display_total-limit">'+f.limit+" files</span>\n</div>"),$(c.settings.form).find(".acf_attachments-sizecontrol").html(e+g))},this.uploadBlockForm=function(){$(c.settings.form).find(".acf_attachments-dragarea").css("opacity",.5),$(c.settings.form).find(".acf_attachments-dragarea > input").prop("disabled",!0),$(c.settings.form).find(".acf_attachments-dragarea > span").attr("disabled","disabled")},this.uploadUnBlockForm=function(){$(c.settings.form).find(".acf_attachments-dragarea").css("opacity",1),$(c.settings.form).find(".acf_attachments-dragarea > input").prop("disabled",!1),$(c.settings.form).find(".acf_attachments-dragarea > span").removeAttr("disabled")},this.spinnerPlay=function(){$(this.settings.form).find(".acf_spinner-wrapper").show()},this.spinnerStop=function(){$(this.settings.form).find(".acf_spinner-wrapper").hide()}}