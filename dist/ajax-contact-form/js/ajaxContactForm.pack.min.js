/*! 
 * ************************************************************************* 
 *  AjaxContactForm | Simple ajax contact form 
 *  Version 1.7.1 - Date: 21/02/2016 
 *  HomePage: https://github.com/Gix075/ajax-contact-form 
 * ************************************************************************* 
*/ 
function reCaptchaValidator(a){var b={publicKey:null,theme:"light",debug:!1,phpValidator:"ajax-contact-form/php/ajaxContactForm_recaptcha.php",callbacks:{success:null,error:null}},c=this;this.params=$.extend(!0,b,a),this.getCaptcha=function(a){grecaptcha.render(a,{sitekey:c.params.publicKey,theme:c.params.theme})},this.validateCaptcha=function(a){var b={response:$("#"+a).find(".g-recaptcha-response").val()};console.log("value: "+b.response),""!=b.response?$.ajax({url:c.params.phpValidator,type:"POST",data:b,dataType:"json",success:function(a){a.success===!0?(c.params.debug===!0&&console.log("reCaptchaValidator: Validation Success!"),c.params.callbacks.success()):(c.params.debug===!0&&console.log("reCaptchaValidator: Validation Fail!"),c.params.callbacks.error())},error:function(){c.params.debug===!0&&console.log("reCaptchaValidator: AjaxError!"),c.params.callbacks.error()}}):(c.params.debug===!0&&console.log("reCaptchaValidator: No reCaptcha Data!"),c.params.callbacks.error())}}function formValidator(a){var b="",c="";this.opts=a,this.formValidation=!0,this.validInput=!1,this.validTextarea=!1,this.validPassword=!1,this.validEmail=!1,this.validSelect=!1,this.validRadio=!1,this.validCheckbox=!1,this.validPhone=!1,b=this.opts,c=this,this.validate=function(a,d,e){$(d).on("click",function(d){d.preventDefault();var f=$("form"+a),g=f.find("input.validate").not('input[type="radio"]').not('input[type="checkbox"]'),h=f.find('input[type="password"].validate.pswd-confirm'),i=f.find('input[type="tel"].validate'),j=f.find("textarea.validate"),k=f.find("select.validate"),l=f.find('input[type="email"].validate'),m=f.find(".radio-group.validate"),n=f.find(".checkbox-group.validate"),o=0;$(g).each(function(){""==$(this).val()?(b.showErrors===!0&&c.showError(this,"input","empty"),o+=1):b.showErrors===!0&&c.hideError(this,"input")}),c.validInput=o>0?!1:!0,o=0,$(i).each(function(){var a=$(this).val();if(""!=a){var d=/^\d+$/;d.test(a)===!1?(b.showErrors===!0&&c.showError(this,"input","wrong"),o+=1):b.showErrors===!0&&c.hideError(this,"input")}}),c.validPhone=o>0?!1:!0,o=0,$(j).each(function(){""==$(this).val()?(b.showErrors===!0&&c.showError(this,"textarea","empty"),o+=1):b.showErrors===!0&&c.hideError(this,"textarea")}),c.validTextarea=o>0?!1:!0,o=0,$(k).each(function(){$("option:selected",this).not(".not-option").length?b.showErrors===!0&&c.hideError(this,"select"):(b.showErrors===!0&&c.showError(this,"select","empty"),o+=1)}),c.validSelect=o>0?!1:!0,o=0,$(l).not(".email-confirm").each(function(){if(""!=$(this).val()&&b.mailformat===!0){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.test($(this).val())===!1?(b.showErrors===!0&&c.showError(this,"email","wrong"),o+=1):b.showErrors===!0&&c.hideError(this,"email")}if(""!=$(this).val()&&b.mailconfirm===!0&&0==o){console.log($(this).attr("id"));var d=$('.email-confirm[data-confirm="#'+$(this).attr("id")+'"]');$(this).val()!=$(d).val()?(b.showErrors===!0&&c.showError(d,"email","wrong"),o+=1):b.showErrors===!0&&c.hideError(d,"email")}}),c.validEmail=o>0?!1:!0,o=0,b.passwordconfirm===!0&&$(h).each(function(){if(""!=$(this).val()){var a=$(this).data("confirm");$(this).val()!=$(a).val()?(b.showErrors===!0&&c.showError(this,"password","wrong"),o+=1):b.showErrors===!0&&c.hideError(this,"password")}}),c.validPassword=o>0?!1:!0,o=0,$(m).each(function(){var a=!1;$(this).find('input[type="radio"]').each(function(){$(this).is(":checked")&&(a=!0)}),a===!1?(b.showErrors===!0&&c.showError(this,"radio","empty"),o+=1):b.showErrors===!0&&c.hideError(this,"radio")}),c.validRadio=o>0?!1:!0,o=0,$(n).each(function(){var a=!1;$(this).find('input[type="checkbox"]').each(function(){$(this).is(":checked")&&(a=!0)}),a===!1?(b.showErrors===!0&&c.showError(this,"checkbox","empty"),o+=1):b.showErrors===!0&&c.hideError(this,"checkbox")}),c.validCheckbox=o>0?!1:!0,o=0,c.validInput===!0&&c.validPassword===!0&&c.validPhone===!0&&c.validTextarea===!0&&c.validEmail===!0&&c.validSelect===!0&&c.validRadio===!0&&c.validCheckbox===!0?e.success():e.fail()})},this.showError=function(a,c,d){if("radio"==c||"checkbox"==c)b.bootstrap===!0?$(a).closest("."+c+"-group").addClass("has-error"):$(a).addClass("error"),$(a).closest("."+c+"-group").find(".form-input-error-msg").addClass("show-error");else switch(b.bootstrap===!0?$(a).closest(".form-group").addClass("has-error"):$(a).addClass("error"),$(a).prev(".form-input-error-msg").addClass("show-error"),d){case"empty":$(a).prev(".form-input-error-msg").find(".error-wrong").removeClass("show-error"),$(a).prev(".form-input-error-msg").find(".error-empty").addClass("show-error");break;case"wrong":$(a).prev(".form-input-error-msg").find(".error-empty").removeClass("show-error"),$(a).prev(".form-input-error-msg").find(".error-wrong").addClass("show-error")}},this.hideError=function(a,c){"radio"==c||"checkbox"==c?(b.bootstrap===!0?$(a).closest("."+c+"-group").removeClass("has-error"):$(a).removeClass("error"),$(a).closest("."+c+"-group").find(".form-input-error-msg").removeClass("show-error")):(b.bootstrap===!0?$(a).closest(".form-group").removeClass("has-error"):$(a).removeClass("error"),$(a).prev(".form-input-error-msg").removeClass("show-error"),$(a).prev(".form-input-error-msg").find(".error-empty,.error-wrong").removeClass("show-error"))},this.clearError=function(a){$(a).find("*").removeClass("error"),$(a).find("*").removeClass("has-error"),$(a).find("*").removeClass("show-error")}}function ajaxContactForm(a){var b={form:"#ajaxContactForm",formBtn:"#ajaxContactFormBtn",ws:"ajax-contact-form/php/ajaxContactForm.php",showMsg:!0,recaptcha:{pubKey:"",element:"ajaxContactForm_recaptcha",theme:"light",ws:"ajax-contact-form/php/ajaxContactForm_recaptcha.php"},attachments:{allowed:!0,ws:"ajax-contact-form/php/attachments/ajaxContactForm_attachments.php",acceptFileTypes:/(\.|\/)(gif|jpe?g|png|pdf|zip)$/i,maxFileSize:20971520,maxTotalSize:20971520,maxFiles:10,cleanAfterMinutes:15},messages:{attachments:{clean:"TIMEOUT - Your file was removed, please upload it again!",fileRemoved:"File removed!",errors:{uploadFailed:"Upload failed!",maxNumberOfFiles:"Sorry, maximum number of files exceeded",maxFileSize:"Sorry, file too large!",maxTotalSize:"Sorry the attachment size amount exceeds the maximum quota!",timeout:"TIMEOUT - Your file was removed, please upload it again!",fileType:"File type not allowed!"}}},debug:!0},c=this;this.settings=$.extend(!0,b,a);var d={publicKey:this.settings.recaptcha.pubKey,theme:this.settings.recaptcha.theme,debug:!0,phpValidator:this.settings.recaptcha.ws,callbacks:{success:function(){$("#"+c.settings.recaptcha.element).prev(".form-input-error-msg").hide(),c.sendMessage()},error:function(){$("#"+c.settings.recaptcha.element).prev(".form-input-error-msg").show()}}};this.recaptcha=new reCaptchaValidator(d),this.init=function(){if(this.recaptcha.getCaptcha(this.settings.recaptcha.element),this.validateContactForm(),this.settings.attachments.allowed===!0){var a="acf_attachmentTotalSize_"+this.settings.form.replace("#",""),b="acf_attachmentMaxNumber_"+this.settings.form.replace("#","");sessionStorage[a]=0,sessionStorage[b]=0,this.uploadFile(this.settings.attachments.cleanAfterMinutes)}},this.validateContactForm=function(){var a={bootstrap:!0,mailconfirm:!0,mailformat:!0,showErrors:!0};new formValidator(a).validate(this.settings.form,this.settings.formBtn,{success:function(){console.log("%c AjaxContactForm: validation success! ","background:#333;color:#fff;"),$(c.settings.form).find(".acf_messagebox").height($(c.settings.form).height()),c.spinnerPlay(),c.recaptcha.validateCaptcha(c.settings.recaptcha.element)},fail:function(){console.log("%c AjaxContactForm: validation fail! ","background:#333;color:red;")}})},this.sendMessage=function(){var a=$(this.settings.form).serialize(),b=this;$.ajax({url:this.settings.ws,type:"POST",data:a,dataType:"json",success:function(a){if(b.spinnerStop(),b.settings.showMsg===!0){switch($(b.settings.form).find(".acf_messagebox").show(),a.result){case"success":$(b.settings.form).find(".acf_messagebox > .msg-error").hide(),$(b.settings.form).find(".acf_messagebox > .msg-success").show();break;case"fail":$(b.settings.form).find(".acf_messagebox > .msg-error > .msg-error-info").text(a.msg),$(b.settings.form).find(".acf_messagebox > .msg-success").hide(),$(b.settings.form).find(".acf_messagebox > .msg-error").show(),console.log("%c AjaxContactForm: MAIL_ERROR ","background:red;color:#fff;")}$(".acf_close-msg").on("click",function(a){a.preventDefault(),$(this).closest(".acf_messagebox").hide()})}},error:function(){console.log("%c AjaxContactForm: AJAX_ERROR ","background:red;color:#fff;"),b.spinnerStop(),$(b.settings.form).find(".acf_messagebox").show(),$(b.settings.form).find(".acf_messagebox > .msg-success").hide(),$(b.settings.form).find(".acf_messagebox > .msg-error").show(),$(".acf_close-msg").on("click",function(a){a.preventDefault(),$(this).closest(".acf_messagebox").hide()})}})},this.uploadFile=function(a){this.settings.attachments.maxFileNumber,this.settings.attachments.maxFileSize,this.settings.attachments.maxTotalSize;$(c.settings.form).find(".acf_attachments-dragarea span").on("click",function(){$(this).closest(".acf_attachments-dragarea").find('input[name="files[]"]').click()});var b="";$(c.settings.form).fileupload({url:c.settings.attachments.ws,dataType:"json",maxFileSize:c.settings.attachments.maxFileSize,acceptFileTypes:c.settings.attachments.acceptFileTypes,dropZone:$(c.settings.form).find(".acf_attachments-dragarea"),messages:{maxNumberOfFiles:c.settings.messages.attachments.errors.maxNumberOfFiles,acceptFileTypes:c.settings.messages.attachments.errors.fileType,maxFileSize:c.settings.messages.attachments.errors.maxFileSize,minFileSize:"File is too small"},done:function(d,e){c.settings.debug===!0&&console.log("ATTACHMENTS --> UPLOAD DONE"),$.each(e.result.files,function(d,e){b='<li>\n   <div class="acf_attachments-filename" data-fileurl="'+e.url+'" data-filename="'+e.name+'" data-filesize="'+e.size+'">\n       <span class="filename">'+e.name+'</span>\n       <span class="fileremove" data-filename="'+e.name+'" data-remove="'+e.deleteUrl+'"><span class="glyphicon glyphicon-remove"></span></span>\n   </div></li>\n',$(c.settings.form).find(".acf_attachments-error-msg").closest("li").remove(),$(c.settings.form).find(".acf_attachments-list").append(b),$(c.settings.form).find(".acf_attachments-progress").hide(),a>0&&c.uploadCleaner(e.name,e.url,e.size,a),c.uploadDeleteFile(e.name),c.uploadUpdateFileVal("add",e.name),c.uploadControlsWidget("add",e.size)})},progressall:function(a,b){$(c.settings.form).find(".acf_attachments-progress").show();var d=parseInt(b.loaded/b.total*100,10);$(c.settings.form).find(".acf_attachments-progbar").css("width",d+"%")},processfail:function(a,d){c.settings.debug===!0&&console.log("ATTACHMENTS --> UPLOAD PROCESS FAIL"),b='<li><span class="acf_attachments-error-msg acf_attachments-processfail-msg">'+d.files[d.index].error+"</span></li>",$(c.settings.form).find(".acf_attachments-error-msg").closest("li").remove(),$(c.settings.form).find(".acf_attachments-list").append(b)},fail:function(a,b){console.log("FAIL: "+b)}})},this.uploadDeleteFile=function(a){$(c.settings.form).find('.fileremove[data-filename="'+a+'"]').on("click",function(b){b.preventDefault();var d=$(this).closest("li"),e=($(this).closest(".acf_attachments-filename").data("fileurl"),$(this).closest(".acf_attachments-filename").data("filesize"));$.ajax({url:$(this).data("remove"),type:"DELETE",success:function(b,f){c.settings.debug===!0&&console.log("ATTACHMENTS --> FILE DELETED!"),"success"===f&&(c.uploadUpdateFileVal("remove",a),c.uploadControlsWidget("remove",e),$(d).find(".acf_attachments-filename").html(c.settings.messages.attachments.fileRemoved),setTimeout(function(){$(d).remove()},1e3))},error:function(){c.settings.debug===!0&&console.log("ATTACHMENTS --> DELETE ERROR: AjaxError!")}})})},this.uploadCleaner=function(a,b,d,e){$.ajax({url:"ajax-contact-form/php/attachments/ajaxContactForm_cleaner.php?file="+a+"&minutes="+e,dataType:"json",success:function(b){b.success===!0&&(c.settings.debug===!0&&console.log("ATTACHMENTS --> CLEANER: "+b.success+" - "+b.file+" "+b.msg),$(c.settings.form).find('.acf_attachments-filename[data-filename="'+b.file+'"]').html('<span class="acf_attachments-error-msg acf_attachments-filetimeout">'+c.settings.messages.attachments.errors.timeout+"</span>"),c.uploadUpdateFileVal("remove",a),c.uploadControlsWidget("remove",d))},error:function(){c.settings.debug===!0&&console.log("ATTACHMENTS --> CLEANER ERROR: AjaxError!")}})},this.uploadUpdateFileVal=function(a,b){var d=$(c.settings.form).find('input[name="acf_attachments"]').val();switch(a){case"add":d=d.split(","),d.push(b);var e=d.toString();e=","===e.charAt(0)?e.slice(1):e,$(c.settings.form).find('input[name="acf_attachments"]').val(e);break;case"remove":d=d.split(",");var f=d.indexOf(b);f>=0&&d.splice(f,1);var e=d.toString();e=","===e.charAt(0)?e.slice(1):e,$(c.settings.form).find('input[name="acf_attachments"]').val(e)}},this.uploadTotalSizeControl=function(a,b){var c="acf_attachmentTotalSize_"+this.settings.form.replace("#",""),d=""!==sessionStorage[c]&&void 0!==sessionStorage[c]?Number(sessionStorage[c]):0;switch(b=Number(b),a){case"add":d+=b,sessionStorage[c]=d;break;case"remove":d-=b,sessionStorage[c]=d}var e={overlimit:this.settings.attachments.maxTotalSize>d?!1:!0,limit:this.settings.attachments.maxTotalSize,amount:d};return e},this.uploadMaxNumberControl=function(a){var b="acf_attachmentMaxNumber_"+this.settings.form.replace("#",""),c=""!==sessionStorage[b]&&void 0!==sessionStorage[b]?Number(sessionStorage[b]):0;switch(a){case"add":c+=1;break;case"remove":c-=1}sessionStorage[b]=c;var d={overlimit:this.settings.attachments.maxFiles>c?!1:!0,limit:this.settings.attachments.maxFiles,amount:c};return d},this.uploadControlsWidget=function(a,b){var d,e,f,g;c.settings.attachments.maxTotalSize>0&&(d=c.uploadTotalSizeControl(a,b)),c.settings.attachments.maxFiles>0&&(f=c.uploadMaxNumberControl(a),c.settings.debug===!0&&console.log("ATTACHMENTS MAX NUMBER --> Overlimit: "+f.overlimit),f.overlimit===!0?c.uploadBlockForm():c.uploadUnBlockForm()),$(c.settings.form).find(".acf_attachments-sizecontrol").length&&(c.settings.attachments.maxTotalSize>0&&(e='<div class="acf_attachments-sizecontrol-display">\n   <span class="display_current-amount">'+Math.round(d.amount/1024/1024*100)/100+'</span>\n   <span class="display_total-limit">'+d.limit/1024/1024+"MB</span>\n</div>"),c.settings.attachments.maxFiles>0&&(g='<div class="acf_attachments-sizecontrol-display">\n   <span class="display_current-amount">'+f.amount+'</span>\n   <span class="display_total-limit">'+f.limit+" files</span>\n</div>"),$(c.settings.form).find(".acf_attachments-sizecontrol").html(e+g))},this.uploadBlockForm=function(){$(c.settings.form).find(".acf_attachments-dragarea").css("opacity",.5),$(c.settings.form).find(".acf_attachments-dragarea > input").prop("disabled",!0),$(c.settings.form).find(".acf_attachments-dragarea > span").attr("disabled","disabled")},this.uploadUnBlockForm=function(){$(c.settings.form).find(".acf_attachments-dragarea").css("opacity",1),$(c.settings.form).find(".acf_attachments-dragarea > input").prop("disabled",!1),$(c.settings.form).find(".acf_attachments-dragarea > span").removeAttr("disabled")},this.spinnerPlay=function(){$(this.settings.form).find(".acf_spinner-wrapper").show()},this.spinnerStop=function(){$(this.settings.form).find(".acf_spinner-wrapper").hide()}}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b=0,c=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var d,e,f=c.call(arguments,1),g=0,h=f.length;h>g;g++)for(d in f[g])e=f[g][d],f[g].hasOwnProperty(d)&&void 0!==e&&(a.isPlainObject(e)?b[d]=a.isPlainObject(b[d])?a.widget.extend({},b[d],e):a.widget.extend({},e):b[d]=e);return b},a.widget.bridge=function(b,d){var e=d.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=c.call(arguments,1),i=this;return g?this.each(function(){var c,d=a.data(this,e);return"instance"===f?(i=d,!1):d?a.isFunction(d[f])&&"_"!==f.charAt(0)?(c=d[f].apply(d,h),c!==d&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):(h.length&&(f=a.widget.extend.apply(null,[f].concat(h))),this.each(function(){var b=a.data(this,e);b?(b.option(f||{}),b._init&&b._init()):a.data(this,e,new d(f,this))})),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=b++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),c),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.unbind(c).undelegate(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});a.widget}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],a):"object"==typeof exports?a(require("jquery"),require("./vendor/jquery.ui.widget")):a(window.jQuery)}(function(a){"use strict";function b(b){var c="dragover"===b;return function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var e=d.dataTransfer;e&&-1!==a.inArray("Files",e.types)&&this._trigger(b,a.Event(b,{delegatedEvent:d}))!==!1&&(d.preventDefault(),c&&(e.dropEffect="copy"))}}a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled")),a.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),a.support.xhrFormDataFileUpload=!!window.FormData,a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(b,c){return b=this.messages[b]||b.toString(),c&&a.each(c,function(a,c){b=b.replace("{"+a+"}",c)}),b},formData:function(a){return a.serializeArray()},add:function(b,c){return b.isDefaultPrevented()?!1:void((c.autoUpload||c.autoUpload!==!1&&a(this).fileupload("option","autoUpload"))&&c.process().done(function(){c.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;return(!this.bitrate||!c||d>c)&&(this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a),this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return"function"===a.type(b.formData)?b.formData(b.form):a.isArray(b.formData)?b.formData:"object"===a.type(b.formData)?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_initProgressObject:function(b){var c={loaded:0,total:0,bitrate:0};b._progress?a.extend(b._progress,c):b._progress=c},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(b,c){if(b.lengthComputable){var d,e=Date.now?Date.now():(new Date).getTime();if(c._time&&c.progressInterval&&e-c._time<c.progressInterval&&b.loaded!==b.total)return;c._time=e,d=Math.floor(b.loaded/b.total*(c.chunkSize||c._progress.total))+(c.uploadedBytes||0),this._progress.loaded+=d-c._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(e,this._progress.loaded,c.bitrateInterval),c._progress.loaded=c.loaded=d,c._progress.bitrate=c.bitrate=c._bitrateTimer.getBitrate(e,d,c.bitrateInterval),this._trigger("progress",a.Event("progress",{delegatedEvent:b}),c),this._trigger("progressall",a.Event("progressall",{delegatedEvent:b}),this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(b){var c,d=this,e=b.files[0],f=b.multipart||!a.support.xhrFileUpload,g="array"===a.type(b.paramName)?b.paramName[0]:b.paramName;b.headers=a.extend({},b.headers),b.contentRange&&(b.headers["Content-Range"]=b.contentRange),f&&!b.blob&&this._isInstanceOf("File",e)||(b.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'),f?a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:g,value:b.blob}):a.each(b.files,function(d,e){c.push({name:"array"===a.type(b.paramName)&&b.paramName[d]||g,value:e})})):(d._isInstanceOf("FormData",b.formData)?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(g,b.blob,e.name):a.each(b.files,function(e,f){(d._isInstanceOf("File",f)||d._isInstanceOf("Blob",f))&&c.append("array"===a.type(b.paramName)&&b.paramName[e]||g,f,f.uploadName||f.name)})),b.data=c):(b.contentType=e.type||"application/octet-stream",b.data=b.blob||e),b.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&c&&c!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var b=a(this),c=b.prop("name")||"files[]",e=(b.prop("files")||[1]).length;e;)d.push(c),e-=1}),d.length||(d=[c.prop("name")||"files[]"])),d},_initFormSettings:function(b){b.form&&b.form.length||(b.form=a(b.fileInput.prop("form")),b.form.length||(b.form=a(this.options.fileInput.prop("form")))),b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||"string"===a.type(b.form.prop("method"))&&b.form.prop("method")||"").toUpperCase(),"POST"!==b.type&&"PUT"!==b.type&&"PATCH"!==b.type&&(b.type="POST"),b.formAcceptCharset||(b.formAcceptCharset=b.form.attr("accept-charset"))},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_addConvenienceMethods:function(b,c){var d=this,e=function(b){return a.Deferred().resolveWith(d,b).promise()};c.process=function(b,f){return(b||f)&&(c._processQueue=this._processQueue=(this._processQueue||e([this])).pipe(function(){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():e(arguments)}).pipe(b,f)),this._processQueue||e([this])},c.submit=function(){return"pending"!==this.state()&&(c.jqXHR=this.jqXHR=d._trigger("submit",a.Event("submit",{delegatedEvent:b}),this)!==!1&&d._onSend(b,this)),this.jqXHR||d._getXHRPromise()},c.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",d._trigger("fail",null,this),d._getXHRPromise(!1))},c.state=function(){return this.jqXHR?d._getDeferredState(this.jqXHR):this._processQueue?d._getDeferredState(this._processQueue):void 0},c.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===d._getDeferredState(this._processQueue)},c.progress=function(){return this._progress},c.response=function(){return this._response}},_getUploadedBytes:function(a){var b=a.getResponseHeader("Range"),c=b&&b.split("-"),d=c&&c.length>1&&parseInt(c[1],10);return d&&d+1},_chunkedUpload:function(b,c){b.uploadedBytes=b.uploadedBytes||0;var d,e,f=this,g=b.files[0],h=g.size,i=b.uploadedBytes,j=b.maxChunkSize||h,k=this._blobSlice,l=a.Deferred(),m=l.promise();return this._isXHRUpload(b)&&k&&(i||h>j)&&!b.data?c?!0:i>=h?(g.error=b.i18n("uploadedBytes"),this._getXHRPromise(!1,b.context,[null,"error",g.error])):(e=function(){var c=a.extend({},b),m=c._progress.loaded;c.blob=k.call(g,i,i+j,g.type),c.chunkSize=c.blob.size,c.contentRange="bytes "+i+"-"+(i+c.chunkSize-1)+"/"+h,f._initXHRData(c),f._initProgressListener(c),d=(f._trigger("chunksend",null,c)!==!1&&a.ajax(c)||f._getXHRPromise(!1,c.context)).done(function(d,g,j){i=f._getUploadedBytes(j)||i+c.chunkSize,m+c.chunkSize-c._progress.loaded&&f._onProgress(a.Event("progress",{lengthComputable:!0,loaded:i-c.uploadedBytes,total:i-c.uploadedBytes}),c),b.uploadedBytes=c.uploadedBytes=i,c.result=d,c.textStatus=g,c.jqXHR=j,f._trigger("chunkdone",null,c),f._trigger("chunkalways",null,c),h>i?e():l.resolveWith(c.context,[d,g,j])}).fail(function(a,b,d){c.jqXHR=a,c.textStatus=b,c.errorThrown=d,f._trigger("chunkfail",null,c),f._trigger("chunkalways",null,c),l.rejectWith(c.context,[a,b,d])})},this._enhancePromise(m),m.abort=function(){return d.abort()},e(),m):!1},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(b),this._initProgressObject(b),b._progress.loaded=b.loaded=b.uploadedBytes||0,b._progress.total=b.total=this._getTotal(b.files)||1,
b._progress.bitrate=b.bitrate=0,this._active+=1,this._progress.loaded+=b.loaded,this._progress.total+=b.total},_onDone:function(b,c,d,e){var f=e._progress.total,g=e._response;e._progress.loaded<f&&this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e),g.result=e.result=b,g.textStatus=e.textStatus=c,g.jqXHR=e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){var e=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total),e.jqXHR=d.jqXHR=a,e.textStatus=d.textStatus=b,e.errorThrown=d.errorThrown=c,this._trigger("fail",null,d)},_onAlways:function(a,b,c,d){this._trigger("always",null,d)},_onSend:function(b,c){c.submit||this._addConvenienceMethods(b,c);var d,e,f,g,h=this,i=h._getAJAXSettings(c),j=function(){return h._sending+=1,i._bitrateTimer=new h._BitrateTimer,d=d||((e||h._trigger("send",a.Event("send",{delegatedEvent:b}),i)===!1)&&h._getXHRPromise(!1,i.context,e)||h._chunkedUpload(i)||a.ajax(i)).done(function(a,b,c){h._onDone(a,b,c,i)}).fail(function(a,b,c){h._onFail(a,b,c,i)}).always(function(a,b,c){if(h._onAlways(a,b,c,i),h._sending-=1,h._active-=1,i.limitConcurrentUploads&&i.limitConcurrentUploads>h._sending)for(var d=h._slots.shift();d;){if("pending"===h._getDeferredState(d)){d.resolve();break}d=h._slots.shift()}0===h._active&&h._trigger("stop")})};return this._beforeSend(b,i),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(j)):(this._sequence=this._sequence.pipe(j,j),g=this._sequence),g.abort=function(){return e=[void 0,"abort","abort"],d?d.abort():(f&&f.rejectWith(i.context,e),j())},this._enhancePromise(g)):j()},_onAdd:function(b,c){var d,e,f,g,h=this,i=!0,j=a.extend({},this.options,c),k=c.files,l=k.length,m=j.limitMultiFileUploads,n=j.limitMultiFileUploadSize,o=j.limitMultiFileUploadSizeOverhead,p=0,q=this._getParamName(j),r=0;if(!l)return!1;if(n&&void 0===k[0].size&&(n=void 0),(j.singleFileUploads||m||n)&&this._isXHRUpload(j))if(j.singleFileUploads||n||!m)if(!j.singleFileUploads&&n)for(f=[],d=[],g=0;l>g;g+=1)p+=k[g].size+o,(g+1===l||p+k[g+1].size+o>n||m&&g+1-r>=m)&&(f.push(k.slice(r,g+1)),e=q.slice(r,g+1),e.length||(e=q),d.push(e),r=g+1,p=0);else d=q;else for(f=[],d=[],g=0;l>g;g+=m)f.push(k.slice(g,g+m)),e=q.slice(g,g+m),e.length||(e=q),d.push(e);else f=[k],d=[q];return c.originalFiles=k,a.each(f||k,function(e,g){var j=a.extend({},c);return j.files=f?g:[g],j.paramName=d[e],h._initResponseObject(j),h._initProgressObject(j),h._addConvenienceMethods(b,j),i=h._trigger("add",a.Event("add",{delegatedEvent:b}),j)}),i},_replaceFileInput:function(b){var c=b.fileInput,d=c.clone(!0),e=c.is(document.activeElement);b.fileInputClone=d,a("<form></form>").append(d)[0].reset(),c.after(d).detach(),e&&d.focus(),a.cleanData(c.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,b){return b===c[0]?d[0]:b}),c[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(b,c){var d,e=this,f=a.Deferred(),g=function(a){a&&!a.entry&&(a.entry=b),f.resolve([a])},h=function(a){e._handleFileTreeEntries(a,c+b.name+"/").done(function(a){f.resolve(a)}).fail(g)},i=function(){d.readEntries(function(a){a.length?(j=j.concat(a),i()):h(j)},g)},j=[];return c=c||"",b.isFile?b._file?(b._file.relativePath=c,f.resolve(b._file)):b.file(function(a){a.relativePath=c,f.resolve(a)},g):b.isDirectory?(d=b.createReader(),i()):f.resolve([]),f.promise()},_handleFileTreeEntries:function(b,c){var d=this;return a.when.apply(a,a.map(b,function(a){return d._handleFileTreeEntry(a,c)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var c=b.items;return c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)?this._handleFileTreeEntries(a.map(c,function(a){var b;return a.webkitGetAsEntry?(b=a.webkitGetAsEntry(),b&&(b._file=a.getAsFile()),b):a.getAsEntry()})):a.Deferred().resolve(a.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=a(b);var c,d,e=b.prop("webkitEntries")||b.prop("entries");if(e&&e.length)return this._handleFileTreeEntries(e);if(c=a.makeArray(b.prop("files")),c.length)void 0===c[0].name&&c[0].fileName&&a.each(c,function(a,b){b.name=b.fileName,b.size=b.fileSize});else{if(d=b.prop("value"),!d)return a.Deferred().resolve([]).promise();c=[{name:d.replace(/^.*\\/,"")}]}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){return b instanceof a&&1!==b.length?a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(b)},_onChange:function(b){var c=this,d={fileInput:a(b.target),form:a(b.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e,c.options.replaceFileInput&&c._replaceFileInput(d),c._trigger("change",a.Event("change",{delegatedEvent:b}),d)!==!1&&c._onAdd(b,d)})},_onPaste:function(b){var c=b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.items,d={files:[]};c&&c.length&&(a.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),this._trigger("paste",a.Event("paste",{delegatedEvent:b}),d)!==!1&&this._onAdd(b,d))},_onDrop:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=this,d=b.dataTransfer,e={};d&&d.files&&d.files.length&&(b.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d,c._trigger("drop",a.Event("drop",{delegatedEvent:b}),e)!==!1&&c._onAdd(b,e)}))},_onDragOver:b("dragover"),_onDragEnter:b("dragenter"),_onDragLeave:b("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),a.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=-1!==a.inArray(b,this._specialOptions);d&&this._destroyEventHandlers(),this._super(b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone)),b.pasteZone instanceof a||(b.pasteZone=a(b.pasteZone))},_getRegExp:function(a){var b=a.split("/"),c=b.pop();return b.shift(),new RegExp(b.join("/"),c)},_isRegExpOption:function(b,c){return"url"!==b&&"string"===a.type(c)&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var b=this,c=this.options,d=this.element.data();a.each(this.element[0].attributes,function(a,e){var f,g=e.name.toLowerCase();/^data-/.test(g)&&(g=g.slice(5).replace(/-[a-z]/g,function(a){return a.charAt(1).toUpperCase()}),f=d[g],b._isRegExpOption(g,f)&&(f=b._getRegExp(f)),c[g]=f)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(b){var c=this;b&&!this.options.disabled&&(b.fileInput&&!b.files?this._getFileInputFiles(b.fileInput).always(function(a){b.files=a,c._onAdd(null,b)}):(b.files=a.makeArray(b.files),this._onAdd(null,b)))},send:function(b){if(b&&!this.options.disabled){if(b.fileInput&&!b.files){var c,d,e=this,f=a.Deferred(),g=f.promise();return g.abort=function(){return d=!0,c?c.abort():(f.reject(null,"abort","abort"),g)},this._getFileInputFiles(b.fileInput).always(function(a){if(!d){if(!a.length)return void f.reject();b.files=a,c=e._onSend(null,b),c.then(function(a,b,c){f.resolve(a,b,c)},function(a,b,c){f.reject(a,b,c)})}}),this._enhancePromise(g)}if(b.files=a.makeArray(b.files),b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],a):a("object"==typeof exports?require("jquery"):window.jQuery)}(function(a){"use strict";var b=a.blueimp.fileupload.prototype.options.add;a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{processQueue:[],add:function(c,d){var e=a(this);d.process(function(){return e.fileupload("process",d)}),b.call(this,c,d)}},processActions:{},_processFile:function(b,c){var d=this,e=a.Deferred().resolveWith(d,[b]),f=e.promise();return this._trigger("process",null,b),a.each(b.processQueue,function(b,e){var g=function(b){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():d.processActions[e.action].call(d,b,e)};f=f.pipe(g,e.always&&g)}),f.done(function(){d._trigger("processdone",null,b),d._trigger("processalways",null,b)}).fail(function(){d._trigger("processfail",null,b),d._trigger("processalways",null,b)}),f},_transformProcessQueue:function(b){var c=[];a.each(b.processQueue,function(){var d={},e=this.action,f=this.prefix===!0?e:this.prefix;a.each(this,function(c,e){"string"===a.type(e)&&"@"===e.charAt(0)?d[c]=b[e.slice(1)||(f?f+c.charAt(0).toUpperCase()+c.slice(1):c)]:d[c]=e}),c.push(d)}),b.processQueue=c},processing:function(){return this._processing},process:function(b){var c=this,d=a.extend({},this.options,b);return d.processQueue&&d.processQueue.length&&(this._transformProcessQueue(d),0===this._processing&&this._trigger("processstart"),a.each(b.files,function(e){var f=e?a.extend({},d):d,g=function(){return b.errorThrown?a.Deferred().rejectWith(c,[b]).promise():c._processFile(f,b)};f.index=e,c._processing+=1,c._processingQueue=c._processingQueue.pipe(g,g).always(function(){c._processing-=1,0===c._processing&&c._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=a.Deferred().resolveWith(this).promise()}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],a):a("object"==typeof exports?require("jquery"):window.jQuery)}(function(a){"use strict";a.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{getNumberOfFiles:a.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(b,c){if(c.disabled)return b;var d,e=a.Deferred(),f=this.options,g=b.files[b.index];return(c.minFileSize||c.maxFileSize)&&(d=g.size),"number"===a.type(c.maxNumberOfFiles)&&(f.getNumberOfFiles()||0)+b.files.length>c.maxNumberOfFiles?g.error=f.i18n("maxNumberOfFiles"):!c.acceptFileTypes||c.acceptFileTypes.test(g.type)||c.acceptFileTypes.test(g.name)?d>c.maxFileSize?g.error=f.i18n("maxFileSize"):"number"===a.type(d)&&d<c.minFileSize?g.error=f.i18n("minFileSize"):delete g.error:g.error=f.i18n("acceptFileTypes"),g.error||b.files.error?(b.files.error=!0,e.rejectWith(this,[b])):e.resolveWith(this,[b]),e.promise()}}})});